---
title: Android 系统适配
date: 2019-09-9 10:04:02
categories: Android
tags: [适配]
---
Android系统适配
主要介绍一下适配各个版本系统的特性

# Android 5.0 
- 5.1 通知栏适配
# Android 6.0
- 6.1 动态权限申请

# Android 7.0
- 7.1 应用间共享文件
Fileprovider
- 7.2 org.apache不支持问题
- 7.3 SharedPreferences闪退
SharedPreferences read = getSharedPreferences(RELEASE_POOL_DATA, MODE_WORLD_READABLE);
//MODE_WORLD_READABLE ：7.0以后不能使用这个获取，会闪退，修改成MODE_PRIVATE

# Android 8.0
- 8.1 通知适配.增加渠道ID 
安装APK.允许安装未知来源
- 8.2 通知适配
安卓8.0中，为了更好的管制通知的提醒，不想一些不重要的通知打扰用户，新增了通知渠道，用户可以根据渠道来屏蔽一些不想要的通知
- 8.3 安装APK
  首先在AndroidManifest文件中添加安装未知来源应用的权限:
```
<uses-permission android:name="android.permission.REQUEST_INSTALL_PACKAGES"/>
```
- 8.4 SecurityException的闪退

- 8.5 静态广播无法正常接收
  问题原因： Android 8.0 引入了新的广播接收器限制，因此您应该移除所有为隐式广播 Intent 注册的广播接收器
- 8.6 Caused by: java.lang.IllegalStateException: Only fullscreen opaque activities can request orientation
问题原因： Android 8.0 非全屏透明页面不允许设置方向（后面8.1系统谷歌就去掉了这个限制，可能很多人真的不习惯吧）

解决方案：
        （1）android:windowIsTranslucent设置为false
        （2）如果还是想用的话，就去掉清单文件中Activity中的android:screenOrientation="portrait"，
        （3）就是使用透明的dialog或者PopupWindow来代替，也可以用DialogFragment，看自己的需求和喜好

# Android 9.0
- 9.1 CLEARTEXT communication to life.115.com not permitted by network security policy
* http明文网络请求问题
- 9.2 其他Api的修改

# Android 10
Android 10版本对于用户的隐私权限要求更严了，所以需要对于权限这块做好适配，如 ime

# 参考
[参考1](https://juejin.im/post/5beaf27fe51d45332a4568e9)
