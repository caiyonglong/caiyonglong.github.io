---
title: 8-25
date: 2016-08-25 08:21:16
tags: [android,sql]
categories: 2016
description: Android中的数据库操作
toc: true 文章目录
author:
comments:
original:
permalink: /404
---

# 前言
 感觉每天都过得非常快，都没有认真总结所学的。俗话说，好记性不如烂笔头，所以想每天挤出一点时间来写点总结。
<!-- MORE -->
# Android 中的数据库操作

其实我们可以对数据进行的操作也就无非四种，即 CRUD。其中 C 代表添加 （Create）， R代表查询（Retrieve）， U代表更新（Update）， D代表删除（Delete）。每一种操 作又各自对应了一种 SQL命令，如果你比较熟悉 SQL语言的话，一定会知道添加数据时使 用 insert，查询数据时使用 select，更新数据时使用 update，删除数据时使用 delete。（引用第一行代码的一句话）
下面是以一个简单的数据表为例。
music 表
| id     | title  | artist |
| :----: | :----: | :---:  |
| 12345  | 歌名    | 歌手   |
| 12346  | 歌名    | 歌手   |

## 查询操作

### query()方法

 query()方法用于对数据进行查询。这个方法的参数非常复杂，最短的一个方法重载也需要传入七个参数。那我们就先来看一下 这七个参数各自的含义吧，第一个参数不用说，当然还是表名，表示我们希望从哪张表中查 询数据。第二个参数用于指定去查询哪几列，如果不指定则默认查询所有列。第三、第四个 参数用于去约束查询某一行或某几行的数据，不指定则默认是查询所有行的数据。第五个参 数用于指定需要去 group by的列，不指定则表示不对查询结果进行 group by操作。第六个参 数用于对 group by之后的数据进行进一步的过滤，不指定则表示不进行过滤。第七个参数用 于指定查询结果的排序方式，不指定则表示使用默认的排序方式。

```java
SQLiteDatabase db = dbHelper.getWritableDatabase();
// 查询music表中所有的数据   
Cursor cursor = db.query("music", null, null, null, null, null, null); 
//再遍历游标cursor，获取数据库中的值
if(cursor.moveToFirst()) {
...
}
```
####  query参数详情
| query()方法参数      |    对应 SQL部分 |描述  |
| :--------: | :--------:| :--: |
| table 		| from table_name  |  指定查询的表名    |
| columns 		|   select column1, column2  |  指定查询的列名   |
| selection 	|    where column = value  | 指定 where的约束条件   |
| selectionArgs |-  	| 为 where中的占位符提供具体的值   |
| group By  	|    group by column  | 指定需要 group by的列    |
| having 		|    where column = value  | 指定 where的约束条件   |
| order By 		|    having column = value   | 对 group by后的结果进一步约束    |

### select 查询语句
使用sql语句查询
```java
sql = "select * from table_name";
db.execSQL(sql);
```
过滤重复数据
select distinct  "字段名"  from  "表名" 

```java
//方法一：
sql = "select distinct title from music ";
db.execSQL(sql);
```

## 插入操作
### insert()方法
insert()方法是专门用于添加数据，有三个参数，第一个参数是表名，我们希望向哪张表里添加数据，这里就传入该表的名字。第二个 参数用于在未指定添加数据的情况下给某些可为空的列自动赋值 NULL，一般我们用不到这 个功能，直接传入 null即可。第三个参数是一个 ContentValues对象，它提供了一系列的 put() 方法重载，用于向 ContentValues 中添加数据。

```java
ContentValues values = new ContentValues(); 
// 开始组装第一条数据   
values.put("title", "歌名1");     
values.put("artist", "歌手1");     
db.insert("music", null, values); 
```

## 删除操作
###  delete()方法
delete()方法专门用于删除数据，这个方法接收三个参数，第一 个参数仍然是表名，这个已经没什么好说的了，第二、第三个参数又是用于去约束删除某一 行或某几行的数据，不指定的话默认就是删除所有行。 
```java
db.delete("music", "title = ?", new String[] { "歌名" }); 
```

## 修改操作
###  update()方法
 update()方法用于对数据进行更新，这个方法 接收四个参数，第一个参数和 insert()方法一样，也是表名，在这里指定去更新哪张表里的数 据。第二个参数是 ContentValues 对象，要把更新数据在这里组装进去。第三、第四个参数 用于去约束更新某一行或某几行中的数据，不指定的话默认就是更新所有行。 
```java
values.put("artist","歌手2");   
db.update("music", values, "id = ?", new String[] { "12345" });   
```

# 后记
虽然现在有些流行开源的sql框架，但基础的sql还是需要的。持续更新中... 
